# pilot_run.py
import pandas as pd
from src.analyze import analyze_universe

# بارگذاری نمونه داده‌ها
def load_csv(path):
    df = pd.read_csv(path, parse_dates=['Date']).set_index('Date').sort_index()
    return df

# نمادها (نمونه)
symbols = ["فولاد","فملی","شستا","خودرو","خساپا","فارس","شبندر","وغدیر","کچاد"," شپنا"]
data_dict = {sym: load_csv(f"data/raw/{sym}.csv") for sym in symbols}

# شاخص‌ها
index_dict = {
    "TEDPIX": load_csv("data/indexes/TEDPIX.csv"),
    "EQUAL": load_csv("data/indexes/EQUAL.csv")
}

signals, long_top, short_top = analyze_universe(data_dict, index_dict)

print("Top 20 Long:")
for s, r, sc in long_top: print(s, r, round(sc, 3))

print("\nTop 20 Short:")
for s, r, sc in short_top: print(s, r, round(sc, 3))

print("\nSample signals:")
for sig in signals[:15]: print(sig)
